@using AniWebApp.Helpers

@model IList<AniWebApp.ActiveTrafficIncidentInfoSelect_Result>

@{
    ViewBag.Title = "Active Construction";
    ViewBag.TitleSmall = string.Format("{0}", @Model.Count());
    ViewBag.BreadcrumbTitle = "Construction";
    ViewBag.HasListItems = Model.Any();
    ViewBag.ListTitle = "Current Construction";
    ViewBag.NoListItemsClass = "alert-success";
    ViewBag.NoListItemsMessage = "No active construction for this region.";
    Layout = "~/Views/Shared/_ListLayout.cshtml";
}

@section breadcrumbs
{
    <li><a href="@Url.Action("ANI", "Projects")">ANI</a></li>
    <li><a href="@Url.Action("Index", "Traffic")">Traffic</a></li>
}

@section table_headers {
    <th></th>
    <th>Description</th>
    <th>Start</th>
    <th>End</th>
    <th>Type</th>
}

@section table_body
{
    @foreach (var m in Model)
    {
        <tr class="@Html.GetTableRowClass(m.SeverityID)">
            <td>
                @if (m.SeverityID >= 3)
                {
                    <span class="fa fa-minus-circle" aria-hidden="true" title="@m.SeverityName"></span>
                }
                else if (m.SeverityID >= 2)
                {
                    <span class="fa fa-exclamation-circle" aria-hidden="true" title="@m.SeverityName"></span>
                }
                else
                {
                    <span class="fa fa-info-circle" aria-hidden="true" title="@m.SeverityName"></span>
                }
            </td>
            <td>
                @m.Description (@m.Lat, @m.Lng)
            </td>
            <td>
                @if (m.StartTimeUTC.HasValue)
                {
                    @m.StartTimeUTC.Value.ToLocalTime().ToString("g")
                }
            </td>
            <td>
                @if (m.EndTimeUTC.HasValue)
                {
                    @m.EndTimeUTC.Value.ToLocalTime().ToString("g")
                }
            </td>
            <td>
                @m.TypeName
            </td>
        </tr>
    }
}
