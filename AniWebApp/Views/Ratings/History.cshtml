@model Ani.Core.Models.Metrics.UserRatingHistoryModel

@{
    Layout = "~/Views/Shared/_ListLayout.cshtml";
    ViewBag.Title = string.Format("{0} Ratings", Model.Rating.Name);
    ViewBag.BreadcrumbTitle = Model.Rating.Name;
    ViewBag.Lead = Model.Rating.Description;
    ViewBag.ListNoItemsMessage = string.Format("You have not entered any {0} ratings yet.", Model.Rating.Name);
    ViewBag.ListTitle = string.Format("{0} Ratings", Model.Rating.Name); ;
    ViewBag.HasListItems = @Model.HistoryEntries.Any();
}

@section breadcrumbs
{
    <li><a href="@Url.Action("ANI", "Projects")">ANI</a></li>
    <li><a href="@Url.Action("Index", "Ratings")">Ratings</a></li>
}

@section header_side_content
{
    @Html.ActionLink("Add Entry", "AddEntry", new { RatingId = @Model.Rating.Id }, new { @class = "btn btn-primary" })
}

@section table_headers
{
    <th>Date</th>
    <th>Rating</th>
    <th>Comments</th>
    <th>Actions</th>
}

@section table_body
{
    @foreach (var entry in Model.HistoryEntries)
    {
        <tr>
            <td>
                @Html.ActionLink(entry.EntryDate.ToLongDateString(), "ViewEntry",
                new
                {
                    ratingId = entry.Rating.Id,
                    year = entry.EntryDate.Year,
                    month = entry.EntryDate.Month,
                    day = entry.EntryDate.Day
                })
            </td>
            <td>
                <span class="bg-primary">
                   &nbsp;@entry.RatingValue / @Model.Rating.MaxValue
                </span>
                <span class="margin-left">
                    @for (int i = @Model.Rating.MinValue; i <= @Model.Rating.MaxValue; i++)
                    {
                        if (i <= entry.RatingValue)
                        {
                            @:<i class="fa fa-star text-primary"></i>
                        }
                        else
                        {
                            @:<i class="fa fa-star-o"></i>
                        }
                    }
                </span>
            </td>
            <td>
                @entry.Comments
            </td>
            <td>
                @Html.ActionLink("Edit", "EditEntry", new
                                                {
                                                    ratingId = @Model.Rating.Id,
                                                    year = entry.EntryDate.Year,
                                                    month = entry.EntryDate.Month,
                                                    day = entry.EntryDate.Day
                                                })
            </td>
        </tr>
    }

}